if (self.CavalryLogger) { CavalryLogger.start_js(["cLbbY"]); }

__d("VideoComponentCoverQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"videoID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"videoID"}],c={kind:"InlineFragment",type:"Video",selections:[{kind:"ScalarField",alias:"permalinkUrl",name:"permalink_url",args:null,storageKey:null},{kind:"ScalarField",alias:"isDisturbing",name:"is_disturbing",args:null,storageKey:null},{kind:"LinkedField",alias:null,name:"image",storageKey:null,args:null,concreteType:"Image",plural:!1,selections:[{kind:"ScalarField",alias:null,name:"uri",args:null,storageKey:null}]}]};return{kind:"Request",fragment:{kind:"Fragment",name:"VideoComponentCoverQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[c]}]},operation:{kind:"Operation",name:"VideoComponentCoverQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c]}]},params:{operationKind:"query",name:"VideoComponentCoverQuery",id:"1931478723571694",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VideoComponentEmbeddedControlsQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"videoID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"videoID"}],c={kind:"InlineFragment",type:"Video",selections:[{kind:"ScalarField",alias:"permalinkUrl",name:"permalink_url",args:null,storageKey:null},{kind:"ScalarField",alias:"canCastVideo",name:"can_cast_video",args:null,storageKey:null},{kind:"ScalarField",alias:"broadcastStatus",name:"broadcast_status",args:null,storageKey:null}]};return{kind:"Request",fragment:{kind:"Fragment",name:"VideoComponentEmbeddedControlsQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[c]}]},operation:{kind:"Operation",name:"VideoComponentEmbeddedControlsQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c]}]},params:{operationKind:"query",name:"VideoComponentEmbeddedControlsQuery",id:"1710751775678986",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VideoComponentWithLoopingPlaybackQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"videoID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"videoID"}],c={kind:"InlineFragment",type:"Video",selections:[{kind:"ScalarField",alias:"isLooping",name:"is_looping",args:null,storageKey:null},{kind:"ScalarField",alias:"loopCount",name:"loop_count",args:null,storageKey:null}]};return{kind:"Request",fragment:{kind:"Fragment",name:"VideoComponentWithLoopingPlaybackQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[c]}]},operation:{kind:"Operation",name:"VideoComponentWithLoopingPlaybackQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c]}]},params:{operationKind:"query",name:"VideoComponentWithLoopingPlaybackQuery",id:"1746038078808360",text:null,metadata:{}}}}();e.exports=a}),null);
__d("VideoComponentLiveInterruptedScreenQuery.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"LocalArgument",name:"videoID",type:"ID!",defaultValue:null}],b=[{kind:"Variable",name:"id",variableName:"videoID"}],c={kind:"InlineFragment",type:"Video",selections:[{kind:"ScalarField",alias:"isLiveAudioFormat",name:"is_live_audio_format",args:null,storageKey:null}]};return{kind:"Request",fragment:{kind:"Fragment",name:"VideoComponentLiveInterruptedScreenQuery",type:"Query",metadata:null,argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[c]}]},operation:{kind:"Operation",name:"VideoComponentLiveInterruptedScreenQuery",argumentDefinitions:a,selections:[{kind:"LinkedField",alias:"video",name:"node",storageKey:null,args:b,concreteType:null,plural:!1,selections:[{kind:"ScalarField",alias:null,name:"__typename",args:null,storageKey:null},{kind:"ScalarField",alias:null,name:"id",args:null,storageKey:null},c]}]},params:{operationKind:"query",name:"VideoComponentLiveInterruptedScreenQuery",id:"1713690985379819",text:null,metadata:{}}}}();e.exports=a}),null);
__d("XUIOverlayButton.react",["cx","AbstractButton.react","React","joinClasses"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a="_51tl selected";return b("React").jsx(b("AbstractButton.react"),babelHelpers["extends"]({},this.props,{label:this.props.label,className:b("joinClasses")(this.props.className,a)}))};return c}(b("React").Component);e.exports=a}),null);
__d("VideoComposerDialogUITypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:VideoComposerDialogUILoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:VideoComposerDialogUILoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:VideoComposerDialogUILoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActorID=function(a){this.$1.actor_id=a;return this};c.setCaptionsNumSelectedFiles=function(a){this.$1.captions_num_selected_files=a;return this};c.setComposerDialogVersion=function(a){this.$1.composer_dialog_version=a;return this};c.setComposerEntryPoint=function(a){this.$1.composer_entry_point=a;return this};c.setCurrentTab=function(a){this.$1.current_tab=a;return this};c.setDialogMode=function(a){this.$1.dialog_mode=a;return this};c.setEditSource=function(a){this.$1.edit_source=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTab=function(a){this.$1.error_tab=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setHasBeenReset=function(a){this.$1.has_been_reset=a;return this};c.setHasUploadFinished=function(a){this.$1.has_upload_finished=a;return this};c.setInvalidationReasons=function(a){this.$1.invalidation_reasons=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setIsComposerPostScheduleRedesign=function(a){this.$1.is_composer_post_schedule_redesign=a;return this};c.setIsPremiere=function(a){this.$1.is_premiere=a;return this};c.setIsPremiereUnderScheduleInTwoStep=function(a){this.$1.is_premiere_under_schedule_in_two_step=a;return this};c.setIsShowPage=function(a){this.$1.is_show_page=a;return this};c.setIsTwoStepPublish=function(a){this.$1.is_two_step_publish=a;return this};c.setNextTab=function(a){this.$1.next_tab=a;return this};c.setOriginalShowVideoType=function(a){this.$1.original_show_video_type=a;return this};c.setPostAttemptCount=function(a){this.$1.post_attempt_count=a;return this};c.setPremiereContentStrategyCondition=function(a){this.$1.premiere_content_strategy_condition=a;return this};c.setPremiereNowCondition=function(a){this.$1.premiere_now_condition=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setShowVideoType=function(a){this.$1.show_video_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUploadAttemptCount=function(a){this.$1.upload_attempt_count=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setVideoAssetID=function(a){this.$1.video_asset_id=a;return this};c.setVideoAssetWaterfallSource=function(a){this.$1.video_asset_waterfall_source=a;return this};c.setVideoID=function(a){this.$1.video_id=a;return this};c.setWaterfallID=function(a){this.$1.waterfall_id=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={actor_id:!0,captions_num_selected_files:!0,composer_dialog_version:!0,composer_entry_point:!0,current_tab:!0,dialog_mode:!0,edit_source:!0,error_message:!0,error_tab:!0,event:!0,has_been_reset:!0,has_upload_finished:!0,invalidation_reasons:!0,is_composer_post_schedule_redesign:!0,is_premiere:!0,is_premiere_under_schedule_in_two_step:!0,is_show_page:!0,is_two_step_publish:!0,next_tab:!0,original_show_video_type:!0,post_attempt_count:!0,premiere_content_strategy_condition:!0,premiere_now_condition:!0,session_id:!0,show_video_type:!0,time:!0,upload_attempt_count:!0,vc:!0,video_asset_id:!0,video_asset_waterfall_source:!0,video_id:!0,waterfall_id:!0,weight:!0};e.exports=a}),null);
__d("XComposerXVideoUploadDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/composerx/video/dialog/",{target_id:{type:"FBID",required:!0},source_id:{type:"String",required:!0},entry_point:{type:"Enum",required:!0,enumType:1},is_reference_video:{type:"Bool",defaultValue:!1}})}),null);
__d("ComposerXVideoUploadDialogController_DEPRECATED",["ActorURI","Arbiter","AsyncDialog","AsyncRequest","Bootloader","DOM","JSResource","React","ReactDOM","ReactPagesComposerGlobalFlags","VideoComposerDialogUITypedLogger","XComposerXVideoUploadDialogController","lazyLoadComponent"],(function(a,b,c,d,e,f){__p&&__p();var g=b("JSResource")("ComposerXVideoUploadDialog.react").__setRef("ComposerXVideoUploadDialogController_DEPRECATED"),h=b("lazyLoadComponent")(g),i={};function j(a){return i[a]}function k(a){i[a.getID()]=a}function l(a){delete i[a]}function m(a){return a in i}var n="timeline";a=function(){"use strict";__p&&__p();function a(c,d,e,f,g,h,i,j,k,l){this.$1=c,this.$2=d,this.$3=e,this.$4=f,this.$5=g,this.$6=h,this.$7=i,this.$8=j,this.$9=k,this.$10=l,this.$11=a.$12(this.$1,this.$4,this.$8),this.$13=!1,this.$14=b("DOM").create("span"),b("DOM").appendContent(document.body,this.$14),this.$15()}var c=a.prototype;c.getID=function(){return this.$11};c.setFileInput=function(a){this.$2=a};c.getFileInput=function(){return this.$2};c.setDroppedFiles=function(a){this.$3=a};c.getDroppedFiles=function(){return this.$3};c.$16=function(a){this.$17=a,this.$18&&this.show()};c.$19=function(){b("ReactPagesComposerGlobalFlags").getIsObjectiveFirstPagesComposer()&&b("Bootloader").loadModules(["PagesPublishingLoggingActions","PagesPublishingFunnelLoggingAdditionalPostTypes"],function(a,b){a.setPostType(b.VIDEO)},"ComposerXVideoUploadDialogController_DEPRECATED")};c.$15=function(){var a=this,c=b("XComposerXVideoUploadDialogController").getURIBuilder().setFBID("target_id",this.$1).setString("source_id",this.$11).setEnum("entry_point",this.$4).setBool("is_reference_video",this.$9).getURI();c=b("ActorURI").create(c,this.$1);g.load();b("AsyncDialog").send(new(b("AsyncRequest"))(c).setAbortHandler(function(){a.$2.clear(),l(a.$11)}))};c.$20=function(){this.$19(),b("ReactDOM").render(b("React").jsx(b("React").Suspense,{fallback:null,children:b("React").jsx(h,{canShowOptimisticPost:this.$7,composer:this.$17,composerID:this.$11,composerEntryPointRef:this.$4,isProfileVideo:this.$4==="profile_video",isReferenceVideo:this.$9,showDialogCancelButton:this.$5,showProcessingDialog:this.$6,isPageTrailer:this.$4==="page_trailer",onCancel:this.$21.bind(this),onDone:this.$22.bind(this)})}),this.$14),this.$13=!0};c.show=function(){this.$17?(this.$18=!1,this.$2?b("Arbiter").inform("ComposerXFilesStore/filesAdded/"+this.$11+"/videoupload",{fileInput:this.$2},"persistent"):this.$3&&b("Arbiter").inform("ComposerXFilesStore/filesDropped/"+this.$11+"/videoupload",{files:this.$3},"persistent"),this.$20()):this.$18=!0};c.$21=function(){b("Arbiter").inform("videoUpload/cancel",{composerID:this.$11}),this.hide()};c.$22=function(a){b("Arbiter").inform("videoUpload/"+this.$11+"/done"),b("Arbiter").inform("Pages/composeFinished",{composerID:this.$11}),this.hide()};c.hide=function(){b("ReactDOM").unmountComponentAtNode(this.$14),this.$13=!1};a.getComposerInstance=function(a){return j(a)};a.$12=function(a,b,c){if(c)return c;else return b+"_"+a};a.clearInstances=function(){i={}};a.showDialog=function(c){c.composerEntryPointRef=c.composerEntryPointRef||n;var d=a.$12(c.targetID,c.composerEntryPointRef,c.originalComposerID);if(!c.fileInput&&!c.files)return;!m(d)?k(new a(c.targetID,c.fileInput||null,c.files||null,c.composerEntryPointRef,c.showDialogCancelButton||!1,c.showProcessingDialog||!1,c.canShowOptimisticPost||!1,c.originalComposerID||"",c.isReferenceVideoUpload||!1)):(new(b("VideoComposerDialogUITypedLogger"))().setEvent("dialog_requested").setActorID(c.targetID).setComposerDialogVersion("V1").setComposerEntryPoint(c.composerEntryPointRef).setDialogMode("video_upload").log(),c.fileInput?j(d).setFileInput(c.fileInput):c.files&&j(d).setDroppedFiles(c.files));j(d).show()};a.setVideoComposer=function(a,b){i[a]&&i[a].$16(b)};return a}();e.exports=a}),null);
__d("oz-player/drm/OzDrmUtils",[],(function(a,b,c,d,e,f){"use strict";a=function(a){return Uint8Array.from(window.atob(a),function(a){return a.charCodeAt(0)})};b=function(a){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(a)))};e.exports={base64ToUint8Array:a,arrayBufferToBase64:b}}),null);
__d("OzWidevineDrmProvider",["URI","oz-player/drm/OzDrmUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("oz-player/drm/OzDrmUtils").arrayBufferToBase64,i=b("oz-player/drm/OzDrmUtils").base64ToUint8Array;a=function(){__p&&__p();function a(a,c,d,e,f){__p&&__p();this.$2=[];this.$4=!0;this.$5=!1;f!==void 0&&f!==null&&f!==""&&(this.$1=i(f));if(c!==null&&c!==void 0&&e!==null&&e!==void 0){f=new(g||(g=b("URI")))(c);f.addQueryData("access_token",e);this.$3=f.toString();this.$5=!0;this.$4=!1}else{c=d["0"];if(c===void 0||c===null){c="/video/drm/getlicense";e=new(g||(g=b("URI")))(c);e.addQueryData("video_id",a);this.$3=e.toString()}else this.$3=c}}var c=a.prototype;c.getKeySystem=function(){return"com.widevine.alpha"};c.getSchemeId=function(){return"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};c.getInitDatas=function(){return this.$2};c.setInitDatas=function(a){this.$2=a};c.getRequireDistinctiveIdentifier=function(){return"optional"};c.getRequirePersistentState=function(){return"optional"};c.getInitDataTypes=function(){return};c.getDrmSessionTypes=function(){return["temporary"]};c.getAudioRobustness=function(){return""};c.getVideoRobustness=function(){return""};c.getServerCertificate=function(){return this.$1};c.getLicenseRequestInfo=function(a){__p&&__p();var b={url:this.$3,method:"POST",body:"",headers:{}};this.$4&&(b.credentials="include");a=h(a);if(this.$5){var c={request:a};b.body=JSON.stringify(c);b.headers["Content-Type"]="application/json"}else b.body=a,b.headers["Content-Type"]="application/text";return b};c.parseLicenseResponse=function(a){__p&&__p();a=String.fromCharCode.apply(null,a);var b;try{b=JSON.parse(a)}catch(a){b=void 0}var c;if(b!==void 0&&b.data!==void 0&&b.data.length===1){b=b.data[0];b.error!==null&&b.error!==void 0||(c=b.license)}else c=a;return c!==void 0&&c!==null&&c!==""?i(c):null};return a}();e.exports=a}),null);
__d("oz-player/drm/OzDrmManager",["oz-player/loggings/OzLoggingUtils","oz-player/loggings/OzOperationLoggerBase","oz-player/shims/OzEventListener","oz-player/shims/OzMaybeNativePromise","oz-player/shims/OzSubscriptionsHandler","oz-player/utils/OzError","oz-player/utils/OzErrorEmitter","oz-player/drm/OzDrmUtils"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("oz-player/loggings/OzLoggingUtils").monitorPromiseAndLogOperation,h=b("oz-player/drm/OzDrmUtils").base64ToUint8Array;a=function(){__p&&__p();function a(a,c){__p&&__p();var d=this;this.$1=new Map();this.$3=!1;this.$5=new(b("oz-player/shims/OzSubscriptionsHandler"))();this.$6=new(b("oz-player/utils/OzErrorEmitter"))();this.$7=!1;this.$8=null;this.$9=function(a){var c=a;a instanceof b("oz-player/utils/OzError")||(c=new(b("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:a.message,extra:{originalError:a}}));d.$6.emitError(c)};this.$4=c;this.$2=a.cloneContext().setType("drm_manager")}var c=a.prototype;c.hasContentProtections=function(){return this.$8};c.onError=function(a){return this.$6.onError(a)};c.addProvider=function(a){this.$1.set(a.getSchemeId(),a)};c.getProviderForSchemeId=function(a){return this.$1.get(a)};c.parseContentProtectionForRepresentation=function(a){__p&&__p();if(!a.ContentProtection)return null;var b=[];for(var c=0;c<a.ContentProtection.length;c++){var d=a.ContentProtection[c],e=d.$.schemeIdUri;e=this.getProviderForSchemeId(e);if(e){var f=e.getInitDatas();if(f.length==0&&d["cenc:pssh"]&&d["cenc:pssh"].length===1){d=d["cenc:pssh"][0]._;d=h(d.replace(/-/g,"+").replace(/_/g,"/"));f=[{data:d,type:"cenc"}];e.setInitDatas(f)}b.push({provider:e,initDatas:f})}}return b};c.startEME=function(a,b,c,d){__p&&__p();var e=this;if(this.$7)return;this.$7=!0;var f=new Map();this.$10(c,d,f,"audio");this.$10(a,b,f,"video");var g;f.forEach(function(a,b){!g?g=e.$11(b,a):g=g["catch"](function(){return e.$11(b,a)})});if(!g){this.$8=!1;return}this.$8=!0;var h=this.$2.getOperationLogger("drm_setup").start();g.then(this.$12.bind(this)).then(this.$13.bind(this)).then(this.$14.bind(this)).then(function(){return h.log()},function(a){e.$9(a),h.setResult("failed").setError(a).log()})};c.$15=function(a){a instanceof b("oz-player/loggings/OzOperationLoggerBase")&&a.getError()&&a.setResult("failed")};c.$10=function(a,b,c,d){__p&&__p();var e=this;b.forEach(function(b){var f;a&&a.ContentProtection?f=e.parseContentProtectionForRepresentation(a):f=b.getCustomField("drmProtections");var g=b.getMimeCodecs();f!==void 0&&f!==null&&f.forEach(function(a){a=a.provider;c.has(a.getKeySystem())||c.set(a.getKeySystem(),{audioCapabilities:new Map(),videoCapabilities:new Map(),distinctiveIdentifier:a.getRequireDistinctiveIdentifier(),persistentState:a.getRequirePersistentState(),sessionTypes:a.getDrmSessionTypes(),initDataTypes:a.getInitDataTypes()});var b=c.get(a.getKeySystem());d==="audio"&&!b.audioCapabilities.has(g)&&b.audioCapabilities.set(g,{contentType:g,robustness:a.getAudioRobustness()});d==="video"&&!b.videoCapabilities.has(g)&&b.videoCapabilities.set(g,{contentType:g,robustness:a.getVideoRobustness()})})})};c.destroy=function(){this.$5.release(),this.$3=!0};c.$11=function(a,b){b={audioCapabilities:Array.from(b.audioCapabilities.values()),videoCapabilities:Array.from(b.videoCapabilities.values()),distinctiveIdentifier:b.distinctiveIdentifier,persistentState:b.persistentState,sessionTypes:b.sessionTypes,initDataTypes:b.initDataTypes};return g(window.navigator.requestMediaKeySystemAccess(a,[b]),this.$2,"drm_request_media_key_system_access",function(){},this.$15)};c.$12=function(a){return this.$3?b("oz-player/shims/OzMaybeNativePromise").reject():g(a.createMediaKeys().then(function(b){return{mediaKeySystemAccess:a,mediaKeys:b}}),this.$2,"drm_create_media_keys",function(){},this.$15)};c.$13=function(a){__p&&__p();var c=this;if(this.$3)return b("oz-player/shims/OzMaybeNativePromise").reject();var d=a.mediaKeySystemAccess,e=a.mediaKeys;if(!e)throw new(b("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"No mediaKeys for mediaKeySystemAccess"});a=this.$4.setMediaKeys(e).then(function(){if(c.$3)return b("oz-player/shims/OzMaybeNativePromise").reject();var a=Array.from(c.$1.values()).find(function(a){return a.getKeySystem()===d.keySystem});if(!a)throw new(b("oz-player/utils/OzError"))({type:"OZ_DRM_MANAGER",description:"Can't find OzDrmProvider for keySystem "+d.keySystem});var f=a.getServerCertificate();return f?e.setServerCertificate(f).then(function(){return{mediaKeySystemAccess:d,mediaKeys:e,provider:a}}):{mediaKeys:e,provider:a}});return g(a,this.$2,"drm_set_media_keys",function(){},this.$15)};c.$14=function(a){__p&&__p();var c=this,d=a.mediaKeys,e=a.provider;a=e.getInitDatas();if(a.length===0){this.$5.addSubscriptions(b("oz-player/shims/OzEventListener").listen(this.$4,"encrypted",function(a){c.$16(d,e,a)["catch"](c.$9)}));return b("oz-player/shims/OzMaybeNativePromise").resolve([])}a=a.map(function(a){return c.$16(d,e,{initData:a.data,initDataType:a.type})});return g(b("oz-player/shims/OzMaybeNativePromise").all(a),this.$2,"drm_request_license",function(){},this.$15)};c.$16=function(a,c,d){var e=this,f=a.createSession();this.$5.addSubscriptions(b("oz-player/shims/OzEventListener").listen(f,"message",function(a){e.$17(f,c,a)["catch"](e.$9)}),b("oz-player/shims/OzEventListener").listen(f,"keystatuseschange",function(a){e.$18(f)["catch"](e.$9)}));return f.generateRequest(d.initDataType,d.initData)};c.$17=function(a,b,c){var d=this;c=b.getLicenseRequestInfo(c.message.slice(0));return window.fetch(c.url,c).then(function(a){return a.arrayBuffer()}).then(function(c){c=new Uint8Array(c);c=b.parseLicenseResponse(c);c===null||c===void 0||c.byteLength===0?d.$9(new Error("No license for "+b.getKeySystem())):a.update(c)})};c.$18=function(a){return a.expiration<Date.now()?a.close():b("oz-player/shims/OzMaybeNativePromise").resolve()};return a}();e.exports={OzDrmManager:a}}),null);
__d("HTML5OzDrmHelper",["OzWidevineDrmProvider","oz-player/drm/OzDrmManager"],(function(a,b,c,d,e,f){"use strict";a=b("oz-player/drm/OzDrmManager").OzDrmManager;c={OzDrmManagerModule:a,OzWidevineDrmProviderModule:b("OzWidevineDrmProvider")};e.exports=c}),null);
__d("VideoComponentClickPlayPause.react",["React","VideoComponent","VideoWithClickPlayPause"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.enable=function(a){new(b("VideoWithClickPlayPause"))(a)};d.disable=function(){};d.shouldComponentUpdate=function(){return!1};d.render=function(){return null};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a)}),null);
__d("VideoComponentSphericalVideoHeadingIndicator.react",["cx","Bootloader","React","VideoComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={enabled:!1};return b}var d=c.prototype;d.enable=function(a){var c=this;if(!this.props.videoData.isSpherical())return;this.setState({enabled:!0},function(){b("Bootloader").loadModules(["VideoSphericalHeadingIndicator"],function(b){var d=c.props.videoData.getSphericalConfig();new b(a,c.refs.root,d.initialHeading,d.initialPitch,d.fieldOfView)},"VideoComponentSphericalVideoHeadingIndicator.react")})};d.disable=function(){this.setState({enabled:!1})};d.render=function(){return!this.state.enabled?null:b("React").jsx("div",{className:"_3lfe",ref:"root"})};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a)}),null);
__d("VideoComponentSphericalVideoOverlay.react",["cx","Bootloader","React","VideoComponent"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.state={enabled:!1};return b}var d=c.prototype;d.enable=function(a){var c=this;if(!this.props.videoData.isSpherical())return;this.setState({enabled:!0},function(){b("Bootloader").loadModules(["VideoSphericalOverlay"],function(b){c.$1&&c.$2&&c.$3&&new b(a,c.$1,c.$2,!1,c.$3)},"VideoComponentSphericalVideoOverlay.react")})};d.disable=function(){this.setState({enabled:!1})};d.render=function(){var a=this;return!this.state.enabled?null:b("React").jsxs("div",{className:"_1-s8",children:[b("React").jsx("div",{className:"_1zvy",ref:function(b){a.$1=b}}),b("React").jsx("div",{className:"_2660",ref:function(b){a.$2=b}}),b("React").jsx("div",{className:"_236i",ref:function(b){a.$3=b}})]})};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a)}),null);
__d("VideoComponentWithSphericalRecenterControl.react",["Bootloader","React","VideoComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.enable=function(a){var c=this;if(!this.props.videoData.isSpherical())return;b("Bootloader").loadModules(["SphericalVideoRecenterControl"],function(b){var d=c.props.videoData.getSphericalConfig();c.$1=new b(a,d.initialHeading,d.initialPitch)},"VideoComponentWithSphericalRecenterControl.react")};d.disable=function(){this.$1&&this.$1.destroy()};d.render=function(){return null};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a)}),null);
__d("VideoComponentWithSphericalVideoPlayer.react",["Bootloader","React","VideoComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.enable=function(a){var c=this;if(!this.props.videoData.isSpherical())return;b("Bootloader").loadModules(["SphericalVideoPlayer"],function(b){var d=c.props.videoData.getSphericalConfig();c.$1=new b(d,{eagerPreload:!0,useContainerDimensions:!0});c.$1.enable(a)},"VideoComponentWithSphericalVideoPlayer.react")};d.disable=function(){this.$1&&this.$1.disable()};d.render=function(){return null};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a)}),null);
__d("VideoResizeMode",[],(function(a,b,c,d,e,f){"use strict";e.exports={FIT:"FIT",COVER_HEIGHT:"COVER_HEIGHT"}}),null);
__d("VideoDataContainer.react",["cx","invariant","regeneratorRuntime","Promise","React","VideoData","VideoPlayer.react","VideoPlayerMetaData","VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=!1,c.$2=null,c.state={errorData:null,isLoading:!0,prevVideoID:c.props.videoID,videoData:null},b)||babelHelpers.assertThisInitialized(c)}c.renderSpinner=function(a,c){return b("React").jsx("div",{className:"_53j5",style:{height:c,width:a},children:b("React").jsx("i",{className:"_5l7x"})})};c.getDerivedStateFromProps=function(a,b){return a.videoID!==b.prevVideoID?{errorData:null,isLoading:!0,prevVideoID:a.videoID,videoData:null}:null};var d=c.prototype;d.componentDidMount=function(){this.$3(this.props)};d.componentDidUpdate=function(a,b){if(a.actorID!==this.props.actorID||a.videoID!==this.props.videoID||((a=a.videoDataConfig)==null?void 0:a.hostNumber)!==((a=this.props.videoDataConfig)==null?void 0:a.hostNumber))this.$3(this.props);else if(b.videoData!==this.state.videoData){a=this.props.onVideoLoaded;typeof a==="function"&&a()}};d.componentWillUnmount=function(){this.$1=!0};d.render=function(){__p&&__p();var a=this.state,d=a.isLoading,e=a.videoData;a=a.errorData;if(a)return this.props.renderError?this.props.renderError(a):null;a=this.props.renderLoading;if(d&&a)return a();if(!e||e===c.VIDEO_DATA_PLACEHOLDER)return null;d=this.props.children;d!=null&&d.type===b("VideoPlayer.react")||h(0,2154);return b("React").cloneElement(d,{videoData:e})};d.$3=function(a){__p&&__p();var c=this,d,e;return b("regeneratorRuntime").async(function(f){__p&&__p();while(1)switch(f.prev=f.next){case 0:this.$2=a.videoID;d=null;e=null;if(!(b("VideoPlayerShakaGlobalConfig").getBool("living_room_optimize_raw_video_data_requests",!1)&&a.rawVideoData&&a.videoID===a.rawVideoData.video_id)){f.next=5;break}return f.abrupt("return",b("Promise").resolve().then(function(){!c.$1&&!a.isUnmountScheduled&&c.$2===a.videoID&&c.setState({videoData:new(b("VideoData"))(a.rawVideoData),isLoading:!1})}));case 5:f.prev=5;f.next=8;return b("regeneratorRuntime").awrap(b("VideoPlayerMetaData").genVideoData(a.videoID,a.videoDataConfig));case 8:e=f.sent;if(!(this.$2!==a.videoID)){f.next=11;break}return f.abrupt("return");case 11:if(!(this.$1||a.isUnmountScheduled)){f.next=13;break}return f.abrupt("return");case 13:if(!(this.$2!==a.videoID)){f.next=15;break}return f.abrupt("return");case 15:f.next=20;break;case 17:f.prev=17,f.t0=f["catch"](5),d=f.t0;case 20:this.$1||(d!==null?this.setState({errorData:d}):this.setState({videoData:e,isLoading:!1}));case 21:case"end":return f.stop()}},null,this,[[5,17]])};return c}(b("React").Component);a.VIDEO_DATA_PLACEHOLDER=new(b("VideoData"))();e.exports=a}),null);
__d("VideoComponentPlayButton.react",["cx","fbt","React","VideoComponent","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$2=function(){b("nullthrows")(d.state.vpc).clickVideo()};d.state={vpc:null};return d}var d=c.prototype;d.$1=function(a){var b=!this.props.syncOnPauseVisibilityWithControls||a.getOption("VideoControls","areControlsVisible");a=a.getState();if(a==="paused"&&b||a==="ready")return!0;b=this.props.alsoVisibleWhen;return!b?!1:Array.isArray(b)?b.includes(a):b===a};d.render=function(){__p&&__p();var a=this.state.vpc;if(!a)return null;var c=a.isPlayRequestPending(),d=a.isBuffering();if(c||d)return b("React").jsx("i",{className:"_5l7x"});if(!this.$1(a))return null;c=h._("Play video");return b("React").jsx("i",{className:"_3htz _1jto _bsl",onClick:this.$2,role:"presentation",children:b("React").jsx("input",{"aria-label":c,type:"button",className:"_yak"})})};d.enable=function(a){this.setState({vpc:a})};d.disable=function(){};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a,{observedVpcEvents:["stateChange","bufferingChanged","pendingPlayRequestChanged","VideoControls/visibilityUpdate"]})}),null);
__d("VideoPlayerDisturbingThumbnail.react",["cx","fbt","React","XUIText.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return(a=b("React")).jsx("div",{className:b("joinClasses")("_20m9",this.props.className),children:a.jsxs("div",{className:"_1cqx",children:[a.jsxs(b("XUIText.react"),{className:"_2ps6 _jxj",display:"block",size:"xlarge_DEPRECATED",weight:"bold",children:[a.jsx("span",{className:"_20ma",children:h._("Warning")}),"-",h._("Graphic Video")]}),a.jsx(b("XUIText.react"),{display:"block",size:"header4",children:h._("Videos that contain graphic content can shock, offend and upset.")}),a.jsx(b("XUIText.react"),{display:"block",size:"header4",children:h._("Are you sure you want to see this?")})]})})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoComponentCover.react",["cx","Image.react","React","ReactDOM","RelayModern","VideoComponent","VideoCover","VideoPlayerDisturbingThumbnail.react","VideoPlayerExperiments","joinClasses","VideoComponentCoverQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidUpdate=function(a){var b=this.videoCover;this.props.clickToSnowLift&&b&&this.props.video&&this.props.video!==a.video&&b.setSnowLiftURI(this.props.video.permalinkUrl)};d.render=function(){return this.props.video&&this.props.video.isDisturbing?b("React").jsx(b("VideoPlayerDisturbingThumbnail.react"),{ref:"root",className:"_1445"}):b("React").jsx("div",{ref:"root",className:b("joinClasses")(this.props.className,"_m54"+(b("VideoPlayerExperiments").useBlurredBars?"":" _5z3s")+" _1jto"),children:this.renderCover()})};d.renderCover=function(){var a=this.props.video;a=a?a.image.uri:null;return b("React").jsx(b("Image.react"),{ref:"img",className:"_1445"+(this.$1()?" _4ndd":"")+(this.$1()?" _2sy9":"")+" _3htz",src:a})};d.enable=function(a){this.videoCover=new(b("VideoCover"))(b("ReactDOM").findDOMNode(this.refs.root),[b("ReactDOM").findDOMNode(this.refs.img)],null,{showAfterFallback:this.props.showAfterFallback,hiddenAfterFinish:this.props.hiddenAfterFinish,showWhileBuffering:this.props.showWhileBuffering}),this.videoCover.enable(a)};d.disable=function(){this.videoCover&&this.videoCover.disable(),this.videoCover=null};d.$1=function(){return!1};return c}(b("React").Component);a.defaultProps={clickToSnowLift:!1,hiddenAfterFinish:!1,hideControlsOnAutoplay:!1,showAfterFallback:!1,showWhileBuffering:!1,useElementDimension:!1,resizeMode:"auto"};e.exports=b("VideoComponent").createContainer(a,{videoGraphQLQuery:h!==void 0?h:h=b("VideoComponentCoverQuery.graphql")})}),null);
__d("VideoComponentEmbeddedControls.react",["cx","React","ReactDOM","RelayModern","VideoBroadcastStatus","VideoComponent","VideoControls","VideoPlayerExperiments","joinClasses","shallowCompare","VideoComponentEmbeddedControlsQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.shouldComponentUpdate=function(a,c){return b("shallowCompare")(this,a,c)};d.componentDidUpdate=function(a){var c=this.embeddedControls,d=this.props,e=d.video,f=d.adBreaks,g=d.instreamAdBreakObjs,h=d.isCommentAttachment;d=d.useTwoRows;var i=this.props,j=i.displayDurationLimit;i=i.displayTimeOffset;c&&(a.isCommentAttachment!==h||a.useTwoRows!==d)&&c.updateTwoRowsConfig({isCommentAttachment:h,useTwoRows:d});c&&e&&e!==a.video&&c.updateConfig_DEPRECATED({adBreaks:g||null,permalinkURL:this.props.showPermalink?e.permalinkUrl:null,showButtons:{casting:e.canCastVideo&&b("VideoPlayerExperiments").chromecast},isLive:e.broadcastStatus===b("VideoBroadcastStatus").LIVE||e.broadcastStatus===b("VideoBroadcastStatus").PRE_LIVE||e.broadcastStatus===b("VideoBroadcastStatus").PREVIEW});c&&f&&f!==a.adBreaks&&c.updateAdBreaksConfig({insertedAdBreaks:f.insertedAdBreaks,isAdBreakDisabled:f.isAdBreakDisabled,isAdBreakInsertionWithoutGapRule:f.isAdBreakInsertionWithoutGapRule,isPreviewingAdBreak:f.isPreviewingAdBreak});c&&(j!=a.displayDurationLimit||i!=a.displayTimeOffset)&&c.updateDisplayTimeRangeConfig({displayDurationLimit:j,displayTimeOffset:i})};d.render=function(){return b("React").jsx("div",{ref:"playerControls",className:b("joinClasses")(this.props.classNames,(this.props.isCommercialBreak?"_2lwf":"")+(this.props.isCommercialBreak?" _167h":"")+" _170l _27db"+(this.props.adBreaks&&this.props.adBreaks.isPreviewingAdBreak?" _1ny5":""))})};d.disable=function(){this.embeddedControls&&(this.embeddedControls.unregister(),this.embeddedControls=null)};d.enable=function(a){this.embeddedControls=new(b("VideoControls"))(a,b("ReactDOM").findDOMNode(this.refs.playerControls),{hideOnEvents:{finish:this.props.hideControlsOnFinish,autoplay:this.props.hideControlsOnAutoplay,pause:this.props.hideControlsOnPause},isCommentAttachment:this.props.isCommentAttachment,unhideOnHover:this.props.unhideControlsOnHover,showButtons:{fullscreen:this.props.showFullscreenButton,watchandscroll:this.props.showWatchAndScrollButton,permalink:this.props.showPermalink},hideSettings:!this.props.showSettingsButton,shouldrendercontrols:this.props.shouldRenderControls,watchandscroll:this.props.detachable,redesign:this.props.redesign,hidePlaybackControl:this.props.hidePlaybackControl,hidePlaybackScrubber:this.props.hidePlaybackScrubber,hideRemainingTime:this.props.hideRemainingTime,isCommercialBreak:this.props.isCommercialBreak,isLiveRewindEnabled:!1,showQualitySelector:this.props.showQualitySelector,displayElapsedTime:this.props.displayElapsedTime,displayMilliseconds:this.props.displayMilliseconds,displayDurationLimit:this.props.displayDurationLimit,displayTimeOffset:this.props.displayTimeOffset,showPlaybackRateControl:this.props.showPlaybackRateControl,showVideoSliderWarningTooltip:this.props.showVideoSliderWarningTooltip,useTwoRows:this.props.useTwoRows,gamesVideoCreatorClippingGK:this.props.gamesVideoCreatorClippingGK,gamesDefaultClipLengthInSec:this.props.gamesDefaultClipLengthInSec})};return c}(b("React").Component);a.defaultProps={showSettingsButton:!0,hideControlsOnFinish:!1,hideControlsOnAutoplay:!1,hideControlsOnPause:!1,isCommentAttachment:!0,unhideControlsOnHover:!1,showFullscreenButton:!0,showWatchAndScrollButton:!1,shouldRenderControls:!0,showPermalink:!1,detachable:!1,redesign:!1,hidePlaybackControl:!1,hidePlaybackScrubber:!1,hideRemainingTime:!1,isCommercialBreak:!1,showQualitySelector:!0,displayElapsedTime:!1,displayMilliseconds:!1,displayDurationLimit:null,displayTimeOffset:null,showPlaybackRateControl:!1,showVideoSliderWarningTooltip:!1,useTwoRows:!1,gamesVideoCreatorClippingGK:!1,gamesDefaultClipLengthInSec:60};e.exports=b("VideoComponent").createContainer(a,{videoGraphQLQuery:h!==void 0?h:h=b("VideoComponentEmbeddedControlsQuery.graphql")})}),null);
__d("VideoComponentWithLoopingPlayback.react",["FBLogger","React","RelayModern","VideoComponent","VideoWithLoopingPlayback","VideoComponentWithLoopingPlaybackQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;b("RelayModern").graphql;function h(a){var b=a.video;if(b){var c=a.infiniteLooping?Number.POSITIVE_INFINITY:b.loopCount;b=b.isLooping||a.forceLooping||a.infiniteLooping;if(b)return c;else return 1}else return 0}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(a){var c=h(this.props);a=h(a);c!==a&&(this.$1?this.$1.setMaxLoopCount(c):b("FBLogger")("video").mustfix("Missing instance of VideoWithLoopingPlayback in componentDidUpdate"))};d.enable=function(a){this.$1!=null&&(this.$1.destroy(),b("FBLogger")("video").mustfix("Existing instance of VideoWithLoopingPlayback in enable; is disable not called before?")),this.$1=new(b("VideoWithLoopingPlayback"))(a,h(this.props))};d.disable=function(){this.$1!=null&&(this.$1.destroy(),this.$1=null)};d.render=function(){return null};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a,{videoGraphQLQuery:g!==void 0?g:g=b("VideoComponentWithLoopingPlaybackQuery.graphql")})}),null);
__d("VideoComponentLiveInterruptedScreen.react",["cx","fbt","CenteredContainer.react","ChannelManager","React","RelayModern","VideoComponent","joinClasses","VideoComponentLiveInterruptedScreenQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;b("RelayModern").graphql;b("ChannelManager").startChannelManager();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.vpc=null;return b}var d=c.prototype;d.enable=function(a){this.vpc=a};d.disable=function(){};d.render=function(){return!this.vpc||!this.vpc.isStreamInterrupted()?null:b("React").jsxs("div",{className:b("joinClasses")(this.props.className,"_1uwa _3htz"),children:[b("React").jsx("div",{className:"_4qn1"}),b("React").jsx(b("CenteredContainer.react"),{vertical:!0,className:"_2q2t",children:b("React").jsx("div",{className:"_1uwb",children:b("React").jsx("div",{className:"_39rw",children:this.$1()})})})]})};d.$1=function(){var a=h._("Live Video Interrupted"),c=h._("Live Audio Interrupted"),d=this.props.video&&this.props.video.isLiveAudioFormat;d=d?c:a;return b("React").jsxs("div",{className:"_39ry",children:[b("React").jsx("div",{className:"_39rz",children:d}),b("React").jsx("div",{className:"_4qn3",children:h._("The broadcast has been paused. It should resume shortly.")})]})};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a,{suppressMount:function(a){return a.getStreamType()==="progressive"},observedVpcEvents:["streamInterrupted","streamResumed"],videoGraphQLQuery:i!==void 0?i:i=b("VideoComponentLiveInterruptedScreenQuery.graphql")})}),null);
__d("DebugOverlayBitrate",["BinarySearch"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={computeBitrate:function(a,b,c){__p&&__p();var d=[],e=0;b=b;a=a;d[0]=d[1]="N/A";if(!b)return{bitrate:d,currentPlayingSegment:e};for(var f=0;f<=1;f++){if(!b[f])continue;c>b[f].length&&(c=0);e=this._getCurrentSegment(f,a,b,c);var g=this._getSegmentSize(f,e,b),h=this._getSegmentLength(f,e,b);d[f]=g&&h?this._getBitrateString(h?g*8/h:0):"N/A"}return{bitrate:d,currentPlayingSegment:e}},_getBitrateString:function(a){var b=1024;return(a/b).toFixed(1)+"Kbps"},_isPlayheadInsideSegment:function(a,b,c){return a>=b&&a<=c},_getCurrentSegment:function(a,c,d,e){__p&&__p();e=e;var f=d[a];if(!f)return-1;var g=f[e];if(!g)return-1;var h=g.startTime;g=g.endTime;if(!this._isPlayheadInsideSegment(c,h,g))if(e<d[a].length-1){f=f[e+1];if(!f)return-1;h=d[a][e+1].startTime;g=d[a][e+1].endTime;this._isPlayheadInsideSegment(c,h,g)?++e:e=-1}else e=-1;if(e===-1){f=b("BinarySearch").findBoundInArray(d[a].map(function(a){return a.startTime}),c,function(a,b){return a-b},b("BinarySearch").LEAST_STRICT_UPPER_BOUND);e=--f}return e},_getSegmentSize:function(a,b,c){if(c[a]&&c[a][b]&&c[a][b].url){c=c[a][b].url;a=c.startByte;b=c.endByte;return a===null||b===null||!b?0:b-a}return 0},_getSegmentLength:function(a,b,c){if(c[a]&&c[a][b]){c=c[a][b];a=c.startTime;b=c.endTime;return a===null||b===null||!b?0:b-a}return 0}};e.exports=a}),null);
__d("VDOPropertyUpdater",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(){__p&&__p();function a(a,b,c){this.parent=b,this.property=a,this.initValue=c}var b=a.prototype;b.safeValue=function(a){return a===void 0?this.initValue:a};b.get=function(a){return this.parent.getProp(a||this.property)};b.replace=function(a){this.parent.replace(this.property,this.safeValue(a))};b.update=function(a,b){this.parent.update(this.property,a,this.safeValue(b))};return a}()}),null);
__d("VDOIdentityHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){var e;e=a.call(this,b,c)||this;e.recordEvent=function(a,b){e.history[a]=e.safeValue(b)};e.recordProperty=e.recordEvent;e.history=[];e.initValue=d;return e}var c=b.prototype;c.previous=function(a,b){this.replace(this.history[b])};c.next=function(a){this.replace(this.history[a])};c.last=function(){return this.safeValue(this.history[this.history.length-1])};return b}(b("VDOPropertyUpdater"))}),null);
__d("VDOSegmentArraysHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b,c)||this;b.indexDiffs=[];return b}var c=b.prototype;c.recordEvent=function(a,b){this.indexDiffs[a]=this.computeSegmentDiffToLog(b)};c.computeSegmentDiffToLog=function(a){__p&&__p();var b=this,c=a;this.segmentIndexEndTimes&&(c=a.map(function(a,c){__p&&__p();c=b.segmentIndexEndTimes[c];if(c==null)return a;var d=a.length;while(--d>=0)if(a[d].endTime<=c){d++;break}return a.slice(d)}));this.segmentIndexEndTimes=this.extractEndTimes(a);return c};c.extractEndTimes=function(a){a=a.map(function(a){return a[a.length-1]});return a.filter(function(a){return a}).map(function(a){a=a.endTime;return a})};c.previous=function(a,b){__p&&__p();b=this.indexDiffs[a];if(b){a=this.get();for(var c=0;c<b.length;c++){var d=b[c].length;if(!d)continue;var e=a[c];b[c]=e.splice(e.length-d,d)}this.updateLivehead(a)}};c.next=function(a){a=this.indexDiffs[a];if(a){var b=this.get();for(var c=0;c<a.length;c++){var d=b[c];d.push.apply(d,a[c])}this.updateLivehead(b)}};c.updateLivehead=function(a){a=this.extractEndTimes(a);a.length&&this.parent.replace("liveheadPosition",Math.min.apply(Math,a))};return b}(b("VDOPropertyUpdater"))}),null);
__d("VDOSegmentStatesHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c){b=a.call(this,b,c)||this;b.segmentStates=[];b.segmentIDs=[];return b}var c=b.prototype;c.recordEvent=function(a,b){var c=b[0];b=b[1];this.segmentIDs[a]=c;this.segmentStates[a]=b};c.previous=function(a,b){a=this.segmentIDs[a];if(a){b=b<0?-1:this.segmentIDs.lastIndexOf(a,b);this.update(a,b===-1?0:this.segmentStates[b])}};c.next=function(a){var b=this.segmentIDs[a];b&&this.update(b,this.segmentStates[a])};return b}(b("VDOPropertyUpdater"))}),null);
__d("VDOSparseHistory",["VDOPropertyUpdater"],(function(a,b,c,d,e,f){"use strict";__p&&__p();e.exports=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){__p&&__p();var e;e=a.call(this,b,c,d)||this;e.recordEvent=function(a,b){e.isUpdate(b)&&(e.history[a]=b,e.mostRecent=b)};e.recordProperty=e.recordEvent;e.getAllUntil=function(a){var b=[];for(var c in e.history)Number(c)<=a&&b.push(e.history[c]);return b};e.history={};e.initValue=d;e.mostRecent=void 0;return e}var c=b.prototype;c.isUpdate=function(a){return this.mostRecent!==a};c.previous=function(a,b){a=-1;for(var c in this.history){if(Number(c)>b)break;a=Number(c)}a>=0&&this.replace(this.history[a])};c.next=function(a){a in this.history&&this.replace(this.history[a])};return b}(b("VDOPropertyUpdater"))}),null);
__d("VDOSourceBufferHealthHistory",["VDOSparseHistory"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function a(b){if(b==null||typeof b!=="object")return b;if(Array.isArray(b))return b.map(a);var c={};for(var d in b)c[d]=a(b[d]);return c};e.exports=(c=a=function(a){__p&&__p();babelHelpers.inheritsLoose(b,a);function b(b,c,d){__p&&__p();var e;e=a.call(this,b,c,d)||this;e.recordEvent=function(a,b){b=b();var c=e.isUpdate(b);window.updates=!!c+(window.updates||0);if(c){var d=g(b);e.history[a]=function(){return d};e.mostRecent=d}};e.recordProperty=e.recordEvent;return e}var c=b.prototype;c.isUpdate=function(a){__p&&__p();var b=this.mostRecent;if(a&&!b)return!0;if(a.length!==this.mostRecent.length)return!0;for(var c=0;c<a.length;c++){var d=a[c],e=b[c];if(!!d!==!!e)return!0;var f=d.length;if(f!==e.length)return!0;if(!f)continue;d=d[f-1].endTime;e=e[f-1].endTime;if(d!==e)return!0}return!1};return b}(b("VDOSparseHistory")),a.deepClone=g,c)}),null);
__d("VideoDebugHistory",["VDOIdentityHistory","VDOSegmentArraysHistory","VDOSegmentStatesHistory","VDOSourceBufferHealthHistory","VDOSparseHistory"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=function(a){if(typeof a==="function"){a=a();return function(){return a}}if(a==null||typeof a!=="object")return a;return Array.isArray(a)?a.slice():Object.assign({},a)};e.exports=function(){__p&&__p();function a(a){this.frozenProps={};this.$1=a;this.history=[];this.offset=Infinity;this.reconstructors={lastError:new(b("VDOIdentityHistory"))("lastError",this),stallTime:new(a=b("VDOSparseHistory"))("stallTime",this,0),playerState:new(b("VDOIdentityHistory"))("playerState",this,"loading"),playbackPosition:new(b("VDOIdentityHistory"))("playbackPosition",this,0),lastMpdFetchDuration:new a("lastMpdFetchDuration",this),mpdUpdatePollCount:new a("mpdUpdatePollCount",this),segmentStates:new(b("VDOSegmentStatesHistory"))("segmentStates",this),segmentArrays:new(b("VDOSegmentArraysHistory"))("segmentArrays",this),getSourceBufferHealth:new(b("VDOSourceBufferHealthHistory"))("getSourceBufferHealth",this),lastLogEvent:new a("lastLogEvent",this)}}var c=a.prototype;c.freezeProps=function(){this.offset=this.history.length;var a=this.$1();for(var b in a)a[b]=g(a[b]);this.frozenProps=a;return this.offset};c.record=function(a,b,c){var d=this.history.length;this.history.push(c);for(var e in this.reconstructors){c=this.reconstructors[e];var f=a[e],g=b[e];f!==void 0&&"recordEvent"in c?c.recordEvent(d,f,b):g!==void 0&&"recordProperty"in c&&c.recordProperty(d,g,b)}};c.getProps=function(){return Object.assign(this.frozenProps,{atHistoryEntry:this.offset,historyLength:this.history.length})};c.prev=function(){var a=Math.min(this.offset,this.history.length),b=a-1;if(b<0)return-Infinity;for(var c in this.reconstructors){var d=this.reconstructors[c];d.previous(a,b)}this.frozenProps.historyEventType=this.history[b];return this.offset=b};c.next=function(){__p&&__p();var a=Math.min(this.offset,this.history.length);a=a+1;if(a>this.history.length)return Infinity;for(var b in this.reconstructors){var c=this.reconstructors[b];c.next(a)}this.frozenProps.historyEventType=this.history[a];return this.offset=a};c["goto"]=function(a){var b=this.reconstructors.playbackPosition.last(),c=a>b,d=0;while(this.frozenProps.playbackPosition>a&&isFinite(d))d=this.prev();while(this.frozenProps.playbackPosition<a&&isFinite(d))d=this.next();this.frozenProps.playbackPosition=Math.max(0,Math.min(a,b));return c?Infinity:d};c.getProp=function(a){return this.frozenProps[a]};c.replace=function(a,b){this.frozenProps[a]=b};c.update=function(a,b,c){this.frozenProps[a][b]=c};return a}()}),null);
__d("VideoDebugDashManifestView.react",["cx","Promise","regeneratorRuntime","React","TooltipLink.react","URI","UserAgent","XHRRequest"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i={streamInterruptAt:"rgba(227,26,28,0.7)",commercialBreakAt:"rgba(127,188,65,0.7)",endedAt:"rgba(0,0,0,0.7)",timelineGapAt:"rgba(255,50,50,0.7)",timelineOverlapAt:"rgba(255,255,255,0.7)"},j=10,k=10,l=2/15,m=1+2*l,n=.25;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.eventInView=function(a){return a.time<d.tMax&&a.time>=d.tMin};d.rangeInView=function(a){return a.startTime<d.tMax&&a.endTime>=d.tMin-n};d.renderTimeline=function(a,c){var e=["v","a"][c];a=a.map(d.renderSegment.bind(babelHelpers.assertThisInitialized(d),e));e=m*c;return b("React").jsx("g",{transform:"translate(0,"+e+")",children:a},"track-"+c)};d.renderBufferHealth=function(a,c){var e=c*m-l;return b("React").jsx("g",{transform:"translate(0,"+e+")",children:a.filter(d.rangeInView).map(d.renderBufferRange)},"buffer"+c)};d.renderMomentEvent=function(a,c){var e=a.type;a=a.time;c={key:c+"-"+e+"-"+a,stroke:i[e]};return b("React").jsx("line",babelHelpers["extends"]({x1:a,x2:a,y1:d.yMin,y2:d.yMax},c))};d.getVisibleSegments=function(a){return a.filter(d.rangeInView)};d.$1=0;return d}var d=c.prototype;d.$2=function(a){a=new(h||(h=b("URI")))(a.url);a=this.props.segmentInitSourceMap.get(a.getPath());if(!a)return"";a=a.getFailoverUri();a=this.$3(a);return a};d.$3=function(a){var c=new(h||(h=b("URI")))(a),d=a.getStartByte();a=a.getEndByte();(d||a)&&(c.addQueryData("bytestart",d),c.addQueryData("byteend",a));return c.toString()};d.$4=function(a){return new(b("Promise"))(function(c,d){new(b("XHRRequest"))(a).setMethod("GET").setResponseType("blob").setResponseHandler(function(a,b,d){d&&c(a)}).setErrorHandler(d).send()})};d.$5=function(a){a=new(h||(h=b("URI")))(a.url).getPath();a=a.substring(a.lastIndexOf("/")+1);return a};d.$6=function(a){var b={a:"audio/mp4",v:"video/mp4"};return b[a[0]]};d.$7=function(a,c,d){var e,f,g,h,i,j,k,l,m;return b("regeneratorRuntime").async(function(n){while(1)switch(n.prev=n.next){case 0:e=b("UserAgent").isPlatform("Mac OS X")?d.metaKey:d.ctrlKey;n.next=3;return b("regeneratorRuntime").awrap(this.$8(a,c,e));case 3:f=n.sent,g=document.createElement("a"),h=window.URL.createObjectURL(f),g.href=h,i=this.$5(a),j=i.lastIndexOf("."),k=i.substring(0,j),l=i.substring(j),g.download=k+"-"+c+l,m=this.$6(c),g.type=m,g.click(),window.URL.revokeObjectURL(h);case 16:case"end":return n.stop()}},null,this)};d.$8=function(a,c,d){__p&&__p();var e=this;return b("regeneratorRuntime").async(function(f){while(1)switch(f.prev=f.next){case 0:c=[this.$3(a.url)];d&&c.unshift(this.$2(a));return f.abrupt("return",b("Promise").all(c.map(function(a){return e.$4(a)})).then(function(a){return new Blob(a)}));case 3:case"end":return f.stop()}},null,this)};d.renderSegment=function(a,c,d){var e=c.startTime,f=c.debugInfo;f=f&&f.delta>0?f.endTime:c.endTime;f=f-e;var g=this.props.getSegmentClass(this.props.segmentStates,c,a),h=""+a+d;return b("React").jsx(b("TooltipLink.react"),{tooltip:"Segment "+d+" - "+a,onClick:this.$7.bind(this,c,h),children:b("React").jsx("rect",{className:g,x:e,width:f,height:"1"})},h)};d.renderBufferRange=function(a,c){var d=a.gap,e=a.startTime;a=a.endTime;d=d?"_4yqh _4sco":"_4yqi _4scq";return b("React").jsx("line",{className:d,x1:e,x2:a},"buffer-"+c)};d.renderDurationEvent=function(a,c){var d=a.type,e=a.track,f=a.startTime;a=a.endTime;e=m*e;var g=e+1,h=f-n,j=f+n,k=a+n,l=a-n;h={d:"M"+h+" "+e+"L"+j+" "+g+"H"+k+"L"+l+" "+e,key:c+"-"+d+"-"+f+"-"+a,fill:i[d],stroke:i[d]};return b("React").jsx("path",babelHelpers["extends"]({},h))};d.renderSegmentStats=function(a,c,d){if(!c)return null;a||(a=[],a[0]=a[1]="N/A");return b("React").jsx(b("TooltipLink.react"),{display:"inline",href:"#",className:"_2io3 _4scr",tooltip:"Current bitrate / Length of the largest buffered segment shown in this track",children:a[d]+" / "+c.toFixed(2)+"s"},"length-"+d)};d.getLongestSegmentLength=function(a){return a.reduce(function(a,b){var c=b.startTime;b=b.endTime;return Math.max(a,b-c)},0)};d.computeViewBox=function(a,b){var c=this.props.segmentArrays.length;this.tMin=a-j;this.tMax=a+k;this.yMin=-2*l;this.yMax=c+2*l*b;return this.tMin+" "+this.yMin+" "+(j+k)+" "+this.yMax};d.render=function(){__p&&__p();var a=this,c=this.props,d=c.segmentArrays;c=c.playbackPosition;if(!d)return null;var e=this.props.getSourceBufferHealth(),f=this.computeViewBox(c,e.length);d=d.map(this.getVisibleSegments);var g=d.map(this.getLongestSegmentLength);c=b("React").jsx("line",{x1:c,x2:c,y1:this.yMin,y2:this.yMax,stroke:"#000"});var h=this.props.timelineEvents.filter(this.eventInView),i=this.props.timelineRanges.filter(this.rangeInView);for(var m=0,n;n=d[m];m++)for(var n=n,o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}q=q;q=q.debugInfo;if(q){var r=q.delta,s,t,u;r>0?(s="timelineGapAt",t=q.endTime,u=q.endTime+r):(s="timelineOverlapAt",t=q.endTime+r,u=q.endTime);i.push({type:s,track:m,startTime:t,endTime:u})}}return b("React").jsxs("div",{className:"_2iob _4scs",children:[b("React").jsxs(b("TooltipLink.react"),{display:"inline",href:"#",className:"_2iof _4scu",tooltip:"The vertical line marks the current playhead position. To the left of it, a "+j+"s window of past segments. Afterwards, the next upcoming "+k+"s of known segments.",children:["Video:",b("React").jsx("br",{}),"Audio:"]}),b("React").jsx("div",{className:"_2iog _4scv",children:g.map(function(b,c){return a.renderSegmentStats(a.props.bitrate,b,c)})}),b("React").jsxs("svg",{className:"_2ioh _4scw",viewBox:f,strokeWidth:l,children:[d.map(this.renderTimeline),h.map(this.renderMomentEvent),i.map(this.renderDurationEvent),c,e.map(this.renderBufferHealth)]})]})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugItem.react",["cx","React","TooltipLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.children,c=null;this.props.column==="right"&&(c="_s5q");var d=this.props.label;this.props.tooltip&&(d=b("React").jsx(b("TooltipLink.react"),babelHelpers["extends"]({},this.props,{children:d})));return b("React").jsxs("div",{className:c,children:[b("React").jsx("b",{children:d}),": ",a]})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugDashMpdLag.react",["React","TooltipLink.react","VideoDebugItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a=a.mpdUpdatePollCount!==this.props.mpdUpdatePollCount;this.setState({mpdPoll:a})};d.shouldComponentUpdate=function(a,b){return b.mpdPoll};d.$1=function(a){return(a/1e3).toFixed(3)+"s"};d.render=function(){var a=this.props,c=a.lastMpdFetchDuration;a=a.lastMpdChangesTime;if(!c)return null;var d=this.$1(Date.now()-a);d="We saw no new segments in this number of MPD polls.\n"+(c?"Last poll with news was "+d+" ago.":"It has been "+d+" without news, since we started polling.");var e=null,f=this.props.prevMpdChangesTime;f&&(e=this.$1(a-f),e=": "+e);return b("React").jsxs("div",{children:[b("React").jsxs(b("VideoDebugItem.react"),{label:"MPD load time",column:"right",tooltip:"Load time of the most recent dash manifest",children:[c.toFixed(3),"s"]}),b("React").jsxs(b("VideoDebugItem.react"),{label:"MPD polls",href:this.props.liveManifestUrl||null,tooltip:"Number of recent dash manifest polls without news,\nand the time last poll for new segments took.",children:[b("React").jsx(b("TooltipLink.react"),{tooltip:d,children:this.props.mpdUpdatePollCount}),e]})]})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugDashRepresentation.react",["React","TooltipLink.react","VideoDebugItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=/replica=(\d*)\&?/;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.idToolLink=function(a){return"https://our.intern.facebook.com/intern/id2/"+a+"/"};d.render=function(){__p&&__p();var a=this.props,c=a.streamId,d=a.audioStreamId,e=a.audioFormat;a=a.liveManifestUrl;if(!c)return null;var f=null,h=c;c=c.replace(/vd?$/,"");/^\d+$/.test(c)&&(h=b("React").jsx(b("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing video representation id",href:this.idToolLink(c),children:h}));c="";if(a&&a.indexOf("aaf=1")>-1){var i=null;a=a.match(g);i=a&&a[1];f=b("React").jsx(b("VideoDebugItem.react"),{label:"AAF Replica",children:i})}if(d){a=d.replace(/ad?$/,"");/^\d+$/.test(a)?c=b("React").jsxs(b("VideoDebugItem.react"),{label:"Audio Representation",children:[b("React").jsx(b("TooltipLink.react"),{target:"_blank",display:"inline",tooltip:"Show VideoEncoding of the playing audio representation id",href:this.idToolLink(a),children:d})," ","(",e,")"]}):c=b("React").jsx(b("VideoDebugItem.react"),{label:"Audio Representation",children:d})}return b("React").jsxs("div",{children:[b("React").jsx(b("VideoDebugItem.react"),{label:"Video Representation",children:h}),c,f]})};return c}(b("React").Component);e.exports=a}),null);
__d("exposeVideoDebug",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a,b){__p&&__p();var c=a.getDebug,d=a.videoID,e=a.loggedError;a=a.lastError;c=c();var f=c.VideoPlayerController,g=c.VideoDebugParent,h=c.VideoDebugOverlay,i=c.VideoBufferGaps,j=c.ComboBufferGaps;c=c.AudioBufferGaps;var k=g.getProps();k=k.segmentArrays;k=k||[];var l=k[0];k=k[1];var m=f.getVideoAPI(),n=m.getDOMElement(),o=m.getDebug(),p=o.VideoPlayerHTML5DashPlayer;o=o.VideoPlayerHTML5ApiCea608StateDebug;var q={},r={};if(p){q=p.getDebug();var s=q;s=s.DashPlayer;s&&(r=s.getDebug(),!r.identifiersIntact)}var t={vid:"videoID",vel:"VideoElement",man:"manifest",mpd:"getManifest",abr:"AbrManager",bwe:"BandwidthEstimator",src:"VideoSource",vss:"VideoSourceStream",vsi:"VideoSegmentIndex",vbm:"VideoBufferManager",vsb:"VideoSourceBuffer",vbg:"VideoBufferGaps",cbg:"ComboBufferGaps",ass:"AudioSourceStream",asi:"AudioSegmentIndex",abm:"AudioBufferManager",asb:"AudioSourceBuffer",abg:"AudioBufferGaps",vtq:"VideoTaskQueue",vts:"VideoTaskScheduler",tss:"TextSourceStream",dsp:"DashPlayer",h5d:"VideoPlayerHTML5DashPlayer",h5a:"VideoPlayerHTML5Api",vpc:"VideoPlayerController",vdp:"VideoDebugParent",vdo:"VideoDebugOverlay",lpe:"LoggedPlayerError",err:"PlayerError",cea608:"VideoPlayerHTML5ApiCea608StateDebug"},u=babelHelpers["extends"]({videoID:d,VideoElement:n,VideoBufferGaps:i,ComboBufferGaps:j,AudioBufferGaps:c,VideoSegmentIndex:l,AudioSegmentIndex:k},q,r,{VideoPlayerHTML5DashPlayer:p,VideoPlayerHTML5Api:m,VideoPlayerController:f,VideoDebugParent:g,VideoDebugOverlay:h,LoggedPlayerError:e,PlayerError:a,VideoPlayerHTML5ApiCea608StateDebug:o,ns:function(a){a===void 0&&(a=window);console.group("videoDebug [videoID "+d+"]");for(var b in t){var c=t[b],e=u[c];e!==void 0&&(a[b]=e,window.console.log(b+" = "+c))}console.groupEnd();return u}});window.videoDebug=u;b&&u.ns()};e.exports=a}),null);
__d("VideoDebugExposeVideoDebug.react",["cx","React","TooltipLink.react","exposeVideoDebug"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a.preventDefault(),b("exposeVideoDebug")(d.props,!!a.shiftKey)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").jsx(b("TooltipLink.react"),{display:"inline",className:"_5jy",style:{right:"15px"},onClick:this.$1,tooltip:"Expose a videoDebug object for this video to js devtools.\n(Shift-click to break out independent globals immediately.)",children:"js"})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugFlag.react",["cx","React","TooltipLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.tooltip,d=a.active,e=a.available;a=a.onClick;var f="_45za";d=this.renderDot(d,e);e=this.props.label;c&&(e=b("React").jsx(b("TooltipLink.react"),{display:"inline",href:"#",tooltip:c,onClick:a,children:e}));return b("React").jsxs("li",{className:f,children:[b("React").jsx("b",{children:e}),": ",d]})};d.renderDot=function(a,c){a={color:a?"green":c?"red":"gray"};return b("React").jsx("span",{className:"_45zb",style:a,children:"\u25cf"})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugLogMessages.react",["cx","React","VideoDebugItem.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=" \ud83d\ude1e";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderOption=function(a,c){var e=a.event;(e==="paused"||e==="finished_playing")&&(e=e.toUpperCase());a=a.logData;var f=a.time_ms;a=a.recent_stalls_count;var g=d.props.initializationTimestamp;f=((f-g)/1e3).toFixed(3);g=a?h:null;return b("React").jsxs("option",{value:c,children:[f,"s: ",e,g]},c)},d.$2=function(a){var b=d.$3();b=b[Number(a.target.value)];console.group("log = %s event",b.event);console.groupEnd()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){return this.$1!==a.lastLogEvent};d.$3=function(){var a=this.props,b=a.getLogEventsUntil;a=a.atHistoryEntry;a=a==null?Infinity:a;return b(a)};d.render=function(){var a=this.$3(),c=a.length-1;this.$1=a[c];var d;a.length&&(d=b("React").jsx("select",{value:c,className:"_4a8p",onChange:this.$2,children:a.map(this.renderOption)}));return b("React").jsx(b("VideoDebugItem.react"),{label:"Log",children:d})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugScubaEventsLink.react",["CurrentUser","React","TooltipLink.react","URI","VideoDebugItem.react","formatDate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getScubaUrl=function(a,c,d){function e(a){a=new Date(a);return b("formatDate")(a,"Y-m-d H:i:s",{skipPatternLocalization:!0})}e={cols:["time_ms","time_ms_begin","event_name","userid","video_id","time_ms_done","stall_time"],derivedCols:[],num_samples:"100",dimensions:["event_name"],startcol:"time_ms_begin",endcol:"time_ms_done",colorcol:"event_name",bordercol:"event_name",ordercol:"time_ms_begin",labelcol:"__number",unit:"Auto",aggregate:"",start:e(d-5e3),end:"now",modifiers:[],aggregateList:[],constraints:{userid:{eq:['["'+a+'"]']},video_id:{eq:['["'+c+'"]']}},c_constraints:{},b_constraints:{}};return new(g||(g=b("URI")))("https://our.intern.facebook.com/intern/scuba/query/").setQueryData({dataset:"video_player_log",view:"TimelineBreakdown",drillstate:JSON.stringify(e)}).toString()};d.shouldComponentUpdate=function(a){var b=this.props.atHistoryEntry!==null;return b?a.atHistoryEntry!==this.props.atHistoryEntry||a.historyLength!==this.props.historyLength:!!a.atHistoryEntry};d.render=function(){__p&&__p();var a=this.props.videoID,c=[];if(this.props.isLiveStream){var d=b("React").jsx(b("TooltipLink.react"),{display:"inline",href:new(g||(g=b("URI")))("https://our.intern.facebook.com/intern/facecast/debug/").setQueryData({video_broadcast_id:a}).toString(),tooltip:"Debug in Facecast",children:"FC"});c.push(b("React").jsxs("span",{children:[" [",d,"]"]},"live"))}if(this.props.isSpherical){d=b("React").jsx(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(g||(g=b("URI")))("https://our.intern.facebook.com/intern/360dive/").setQueryData({video_id:a}).toString(),tooltip:"Debug in 360dive",children:"360dive"});c.push(b("React").jsxs("span",{children:[" [",d,"]"]},"spherical"))}d=b("React").jsx(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new(g||(g=b("URI")))("https://our.intern.facebook.com/intern/ads/video_ads/state_based_debugger/").setQueryData({query_id:b("CurrentUser").getID()+":"+a}).toString(),tooltip:"Debug in StateBasedDebug",children:"SBL"});c.push(b("React").jsxs("span",{children:[" [",d,"]"]},"sbl"));d=b("React").jsx(b("TooltipLink.react"),{display:"inline",target:"_blank",href:new g("https://our.intern.facebook.com/intern/video_metrics/vsl/session_explorer/").setQueryData({session_key:b("CurrentUser").getID()+":"+a}).toString(),tooltip:"Debug in VSL Explorer",children:"VSL"});c.push(b("React").jsxs("span",{children:[" [",d,"]"]},"vsl"));d=this.props.initializationTimestamp;d={href:this.getScubaUrl(b("CurrentUser").getID(),a,d),tooltip:"Show scuba video_player_log events timeline for this video",target:"_blank",label:"Video"};var e=null,f=this.props,h=f.atHistoryEntry;f=f.historyLength;h!=null&&(e=b("React").jsxs("span",{children:[b("React").jsx("b",{children:" frozen at"})," ",h,"/",f]}));return b("React").jsxs(b("VideoDebugItem.react"),babelHelpers["extends"]({},d,{children:[a,c,e]}))};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugOverlay.react",["cx","React","TooltipLink.react","VideoDebugDashManifestView.react","VideoDebugDashMpdLag.react","VideoDebugDashRepresentation.react","VideoDebugExposeVideoDebug.react","VideoDebugFlag.react","VideoDebugItem.react","VideoDebugLogMessages.react","VideoDebugScubaEventsLink.react"],(function(a,b,c,d,e,f,g){__p&&__p();function h(a){return Math.floor(a/125)}a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(a){return Number(a||0).toFixed(1)+"ms"};d.$2=function(a,b){b===void 0&&(b=3);return Number(a||0).toFixed(b)+"s"};d.$3=function(a,b){return Math.floor(a)+" / "+Math.floor(b)};d.render=function(){__p&&__p();var a=null;if(this.props.streamType==="dash")a=b("React").jsx(b("VideoDebugDashRepresentation.react"),{streamId:this.props.streamId,audioStreamId:this.props.audioStreamId,audioFormat:this.props.dashAudioFormat,liveManifestUrl:this.props.liveManifestUrl});else{var c=this.props,d=c.tagSD;c=c.tagHD;c?a=d+" (SD) / "+c+" (HD)":a=d+" (SD)";a=b("React").jsx(b("VideoDebugItem.react"),{label:"Encoding",children:a})}c=!!this.props.segmentArrays;d="The current time of the video.";c&&(d+=" (The black bar in the graph.)");c=null;var e=this.props,f=e.liveheadPosition;e=e.playbackPosition;if(f&&this.props.isLiveStream){f=this.$2(f-e);c=b("React").jsx(b("VideoDebugItem.react"),{label:"Livehead \u0394",column:"right",tooltip:"How much ahead of the playhead the current livehead is. In the graph below, that amounts to the time between the playhead (the black bar) and the end of the final segment.",children:f})}else c=b("React").jsx(b("VideoDebugItem.react"),{label:"Duration",column:"right",children:this.$2(this.props.playbackDuration)});f=null;this.props.isLiveStream&&this.props.streamType=="dash"&&(f=b("React").jsx(b("VideoDebugDashMpdLag.react"),{liveManifestUrl:this.props.liveManifestUrl,lastMpdFetchDuration:this.props.lastMpdFetchDuration,mpdUpdatePollCount:this.props.mpdUpdatePollCount,prevMpdChangesTime:this.props.prevMpdChangesTime,lastMpdChangesTime:this.props.lastMpdChangesTime}));var g=this.props.lastError;if(g){var i=g,j=i.error;i=i.message;g=b("React").jsxs(b("VideoDebugItem.react"),{label:"Error",children:[j,": ",i]})}j=this.props;i=j.atHistoryEntry;j=j.historyEventType;i=i!=null?"isFrozen":null;var k=null;j?k=b("React").jsx(b("VideoDebugItem.react"),{label:"History event",children:j}):k=b("React").jsx(b("VideoDebugItem.react"),{label:"Autoplay reason",children:b("React").jsx(b("TooltipLink.react"),{display:"inline",href:"#",tooltip:this.props.autoplayReasonReadable,children:this.props.autoplayReason})});j=null;this.props.isLiveStream&&this.props.fblsHost&&(j=b("React").jsx(b("VideoDebugItem.react"),{label:"FBLS Host",column:"left",children:this.props.fblsHost}));var l=null;this.props.isLiveStream&&this.props.fblsTier&&(l=b("React").jsx(b("VideoDebugItem.react"),{label:"FBLS Tier",column:"left",children:this.props.fblsTier}));var m=null;this.props.isLiveStream&&this.props.p2pTech&&(m=b("React").jsx("div",{children:b("React").jsx(b("VideoDebugItem.react"),{label:"P2P Tech",tooltip:"The peering technology used",children:this.props.p2pTech})}));var n=null;if(this.props.isLiveStream&&this.props.p2pStats){var o,p,q=Object.keys(this.props.p2pStats.partners).length;n=(o=b("React")).jsxs("div",{children:[o.jsx(p=b("VideoDebugItem.react"),{label:"Connected peers",column:"right",children:q}),o.jsxs(p,{label:"P2P Savings",column:"left",tooltip:"Percent savings, defined as p2pResponseBytes / (cdnResponseBytes + p2pResponseBytes)",children:[this.props.p2pStats.savings.toFixed(3),"%"]}),o.jsxs(p,{label:"CDN Requests",column:"right",tooltip:"CDN requests made by the Hive P2P plugin (Requests / Responses / Errors)",children:[this.props.p2pStats.cdnRequests," /"," ",this.props.p2pStats.cdnResponses," /"," ",this.props.p2pStats.cdnResponseErrors]}),o.jsxs(p,{label:"P2P Requests",column:"left",tooltip:"P2P requests made by the Hive P2P plugin (Requests / Responses / Errors)",children:[this.props.p2pStats.p2pRequests," /"," ",this.props.p2pStats.p2pResponses," /"," ",this.props.p2pStats.p2pResponseErrors]})]})}q=null;this.props.isLiveStream&&this.props.inputStreamId&&(q=b("React").jsx(b("VideoDebugItem.react"),{label:"Input Stream Id",children:this.props.inputStreamId}));o=null;p=null;var r=null;this.props.isLiveStream&&(o=b("React").jsx(b("VideoDebugFlag.react"),{label:"IsShadow",active:this.props.isShadow,tooltip:"Indicates if the LIVE video is server side generated replica."}),this.props.isShadow&&(r=b("React").jsx(b("VideoDebugItem.react"),{label:"Shadow Experiment Name",children:this.props.shadowExperimentName})),p=b("React").jsx(b("VideoDebugFlag.react"),{label:"IsActiveActive",active:this.props.isActiveActiveStream,tooltip:"Indicates if the stream has active-active failover behavior."}));var s=null;this.props.viewabilityPercentage&&(s=b("React").jsx(b("VideoDebugItem.react"),{label:"Viewability Percentage",children:this.props.viewabilityPercentage}));var t=b("React").jsx(b("VideoDebugItem.react"),{label:"Projection",children:this.props.projection});this.props.isSpherical&&(t=b("React").jsxs("div",{children:[b("React").jsx(b("VideoDebugItem.react"),{label:"Yaw / Pitch",tooltip:"The yaw / pitch orientation of the video",children:this.$3(this.props.yaw,this.props.pitch)}),t]}));return b("React").jsxs("div",{className:i,children:[b("React").jsx(b("TooltipLink.react"),{target:"_blank",display:"inline",className:"_5jy",href:"https://our.intern.facebook.com/intern/dex/video-debug-overlay/",tooltip:"See the DEX about how to read this overlay",children:"?"}),b("React").jsx(b("VideoDebugExposeVideoDebug.react"),{videoID:this.props.videoID,getDebug:this.props.getDebug,VideoDebugOverlay:this,loggedError:this.props.loggedError,lastError:this.props.lastError}),b("React").jsx(b("VideoDebugScubaEventsLink.react"),{videoID:this.props.videoID,initializationTimestamp:this.props.initializationTimestamp,atHistoryEntry:this.props.atHistoryEntry,historyLength:this.props.historyLength,isLiveStream:this.props.isLiveStream,isSpherical:this.props.isSpherical}),k,b("React").jsx(b("VideoDebugLogMessages.react"),{lastLogEvent:this.props.lastLogEvent,atHistoryEntry:this.props.atHistoryEntry,getLogEventsUntil:this.props.getLogEventsUntil,initializationTimestamp:this.props.initializationTimestamp}),g,b("React").jsx(b("VideoDebugItem.react"),{label:"State",column:"right",children:this.props.playerState}),b("React").jsx(b("VideoDebugItem.react"),{label:"Player",children:this.props.playerVersion}),b("React").jsx(b("VideoDebugItem.react"),{label:"Stalls",column:"right",tooltip:"total stall/in-play stall: total stall time/in-play stall time",children:this.props.stallCount+"/"+this.props.inPlayStallCount+": "+(this.$2(this.props.stallTime/1e3,1)+"/")+(""+this.$2(this.props.inPlayStallTime/1e3,1))}),b("React").jsx(b("VideoDebugItem.react"),{label:"Init time",children:this.$2(this.props.initializationTime/1e3)}),b("React").jsxs(b("VideoDebugItem.react"),{label:"Interrupts",column:"right",children:[this.props.interruptCount,": ",this.$2(this.props.interruptTime/1e3)]}),b("React").jsx(b("VideoDebugItem.react"),{label:"Stream Type",children:this.props.streamType}),b("React").jsx(b("VideoDebugItem.react"),{label:"Frames/Dropped",column:"right",children:this.props.totalFrames+"/"+this.props.droppedFrames}),b("React").jsx(b("VideoDebugItem.react"),{label:"Round-trip time",children:this.props.lastRTT?this.$1(this.props.lastRTT):"n/a"}),b("React").jsxs(b("VideoDebugItem.react"),{label:"Rep. Size",column:"right",tooltip:"Resolution of the representation, as reported by the browser, followed by the MOS value",children:[this.props.videoWidth,"x",this.props.videoHeight,this.props.mosValue?" ("+this.props.mosValue.toFixed(2)+")":""]}),t,b("React").jsx(b("VideoDebugItem.react"),{label:"CVC v3 count",column:"right",tooltip:"Concurrent Viewer Count v3. ",target:"_blank",href:"https://our.intern.facebook.com/intern/video/cvc?id="+this.props.videoID,children:this.props.cvcV3Count}),a,b("React").jsxs("ul",{children:[b("React").jsx(b("VideoDebugFlag.react"),{label:"HD",active:this.props.isHD,available:this.props.hasHD,tooltip:"High Definition. Indicates if the video has an HD stream and if it is playing."}),b("React").jsx(b("VideoDebugFlag.react"),{label:"Live",active:this.props.isLiveStream,tooltip:"Indicates if this is a Live stream."}),b("React").jsx(b("VideoDebugFlag.react"),{label:"CVC Poller",active:this.props.isPolling,available:this.props.isLiveStream,tooltip:"Concurrent Viewer Count Poller. Indicates if a poll request was sent recently. This should blink at a ~3 sec inteval."}),b("React").jsx(b("VideoDebugFlag.react"),{label:"RL",active:this.props.isRateLimited,available:this.props.hasRateLimit,tooltip:"Rate Limit. Indicates if the server is rate limiting the video stream."}),b("React").jsx(b("VideoDebugFlag.react"),{label:"ST",active:this.props.hasSubtitles,tooltip:"Subtitles. Indicates if the video has subtitles."}),b("React").jsx(b("VideoDebugFlag.react"),{label:"SA",active:this.props.hasSpatialAudio,tooltip:"Spatial Audio. Indicates if the video has spatial audio."}),b("React").jsx(b("VideoDebugFlag.react"),{label:"Akamai",active:this.props.isAkamai,tooltip:"Akamai. Indicates if the video is being served from Akamai."}),b("React").jsx(b("VideoDebugFlag.react"),{label:"DRM",active:this.props.isDrm,tooltip:"DRM. Indicates if this video is protected by DRM"}),o,p]}),c,s,b("React").jsx(b("VideoDebugItem.react"),{label:"Playhead",tooltip:d,children:this.$2(e)}),b("React").jsx(b("VideoDebugItem.react"),{label:"Bandwidth Estimate (Kbps)",tooltip:"The current bandwidth estimate",children:h(this.props.bandwidthEstimate)}),b("React").jsx(b("VideoDebugDashManifestView.react"),{getSourceBufferHealth:this.props.getSourceBufferHealth,playbackPosition:e,segmentInitSourceMap:this.props.segmentInitSourceMap,segmentStates:this.props.segmentStates,segmentArrays:this.props.segmentArrays,timelineEvents:this.props.timelineEvents,timelineRanges:this.props.timelineRanges,getSegmentClass:this.props.getSegmentClass,bitrate:this.props.bitrate}),f,j,l,q,r,m,n]})};return c}(b("React").Component);e.exports=a}),null);
__d("VideoDebugOverlay",["cx","CSS","DebugOverlayBitrate","FBJSON","KeyboardShortcuts","MosUtils","React","ReactDOM","SubscriptionsHandler","URI","UserAgent","VideoDebugHistory","VideoDebugOverlay.react","VideoPlayerShakaGlobalConfig","cancelAnimationFrame","clearTimeout","exposeVideoDebug","getActiveElement","requestAnimationFrame","setTimeout"],(function(a,b,c,d,e,f,g){__p&&__p();var h,i=b("MosUtils").getMosValue,j=0,k=1,l=2,m=["SegmentUnknown","SegmentFetching","SegmentFetched","SegmentFailed","SegmentAppended"],n=["_2io2","_19ur","_19us","_19ut","_37la"];a=function(){"use strict";__p&&__p();function a(c,d,e){__p&&__p();var f=this;this.$12=function(a){a!=="DebugOverlay"&&f.setHidden(!0)};this.inFocusAndAltKey=function(a,c){var d=b("UserAgent").isPlatform("Mac OS X");d=a.altKey&&(d||a.shiftKey);if(!d||c!=="onkeydown"||a.ctrlKey||a.metaKey)return!1;d=f.$4;c=b("getActiveElement")();return c.contains(d)||d.contains(c)};this.toggleMute=function(a){a=f.$16;a.isMuted()?a.unmute():a.mute()};this.togglePause=function(a){a=f.$16;a.isState("playing")?a.pause("user_initiated"):a.play("user_initiated")};this.onExpose=function(a){b("exposeVideoDebug")(f.getProps(),!!a.shiftKey)};this.onFreeze=function(a){if(f.$11)return f.resume();else return f.freeze()};this.onHistoryRew=function(a){return a.shiftKey?f["goto"](-Infinity):f.prev()};this.onHistoryFwd=function(a){if(a.shiftKey){f["goto"](Infinity);return f.resume()}return f.next()};this.onLivePoll=function(){f.$21&&b("clearTimeout")(f.$21),f.$21=b("setTimeout")(function(){f.$21=null},1e3)};this.onUnifiedCVCUpdate=function(a){f.$7.cvcV3Count=a.c};this.onDashPlayerDebug=function(a){__p&&__p();var b=a.type;a=a.event;var c=null;switch(b){case"MPDFetchDuration":var d=a;f.$7.lastMpdFetchDuration=d;c={lastMpdFetchDuration:d};break;case"InitialSegmentIndexes":c=f.onSegmentIndexes(a,!0);f.$3=f.$16.getVideoTracks()||[];break;case"SegmentIndexesUpdated":c=f.onSegmentIndexes(a,!1);break;case"SegmentInitSources":f.onSegmentInitSources(a);break;case"SegmentFetching":case"SegmentFetched":case"SegmentFailed":case"SegmentAppended":c=f.onSegmentEvent(b,a);break;case"streamInterruptAt":case"commercialBreakAt":case"endedAt":f.addTimelineMark(b,a);break;case"streamResumedAt":f.removeTimelineMark("streamInterruptAt",a);break;case"P2PStats":f.onP2PStats(a);break;case"P2PTech":f.onP2PTech(a);break;default:return}c&&f.record(b,c)};this.onVpcLogEvent=function(a){f.$7.lastLogEvent=a,f.$7.getLogEventsUntil=f.$6.reconstructors.lastLogEvent.getAllUntil,f.record(a.event,{lastLogEvent:a})};this.getSourceBufferHealth=function(){f.$13[k]=f.$16.getVideoNode();return f.$13.map(f.$23)};this.$23=function(a,b){__p&&__p();var c=[];if(!a)return c;var d;try{a=a.buffered,d=a.length}catch(a){return c}for(var e=0;e<d;e++)c.push({gap:!1,startTime:a.start(e),endTime:a.end(e)});for(var a=1;a<d;a++){e={gap:!0,startTime:c[a-1].endTime,endTime:c[a].startTime};c.push(e);f.$14[b][e.startTime]=e}return c};this.toggleHidden=function(){return f.setHidden(!f.getHidden())};this.getHidden=function(){return f.$24};this.setHidden=function(a){f.$24=a,f.$24?f.stopAnimating():(f.$16&&f.$16.showDebugOverlayView("DebugOverlay"),f.startAnimating()),b("CSS").conditionClass(f.$4,"hidden_elem",f.$24)};this.getDebug=function(){return{VideoPlayerController:f.$16,VideoDebugOverlay:f.vdo,VideoDebugParent:f,VideoBufferGaps:f.$14[j],ComboBufferGaps:f.$14[k],AudioBufferGaps:f.$14[l]}};this.getProps=function(){__p&&__p();var c=f.$16;if(!c)return null;var d=c.getVideoResolution(),e=d.height;d=d.width;var g=c.getDebugInfo(),h=g.currentVideo;g=g.player;var i=g.dimensions,j=b("DebugOverlayBitrate").computeBitrate(c.getCurrentTimePosition(),f.$7.segmentArrays,f.$2);j=j.bitrate;return Object.assign({},f.$7,{bandwidthEstimate:c.getBandwidthEstimate(),videoID:c.getVideoID(),playbackPosition:c.getCurrentTimePosition(),playbackDuration:c.getPlaybackDuration(),isSpherical:c.isSpherical(),streamType:h.streamType,projection:h.projection,isLiveStream:h.isLiveStream,isHD:h.isHD,hasHD:h.hasHD,tagSD:h.tagSD,tagHD:h.tagHD,hasSubtitles:h.hasSubtitles,isRateLimited:h.isRateLimited,hasRateLimit:h.hasRateLimit,liveManifestUrl:h.liveManifestUrl,isAkamai:h.liveManifestUrl&&h.liveManifestUrl.includes("akamaihd"),streamId:h.streamId,audioStreamId:h.audioStreamId,videoHeight:e,videoWidth:d,isDrm:h.isDrm,mosValue:h&&i?f.getActiveMosValue(h.streamId,i.width,i.height):null,hasSpatialAudio:c.getOption("SphericalVideoSpatialAudioController","hasSpatialAudio"),dashAudioFormat:h.dashAudioFormat,initializationTime:g.initializationTime,initializationTimestamp:g.initializationTimestamp,playerVersion:g.version,stallCount:g.stallCount,stallTime:g.stallTime,inPlayStallCount:g.inPlayStallCount,inPlayStallTime:g.inPlayStallTime,interruptCount:g.interruptCount,interruptTime:g.interruptTime,loggedError:g.loggedError,lastError:g.lastError,droppedFrames:g.droppedFrames,totalFrames:g.totalFrames,viewabilityPercentage:g.viewabilityPercentage,getDebug:f.getDebug,playerState:f.$20(),isPolling:!!f.$21,getSegmentClass:a.getSegmentClass,bitrate:j})};this.$26=function(a){f.vdo=a};this.$4=c;this.$5=d;this.$6=new(b("VideoDebugHistory"))(this.getProps);this.$7=this.$8();this.$9();this.$10=null;this.$11=!1;this.setHidden(e.hidden);this.$1=e.timeBetweenRender;this.$2=0}var c=a.prototype;c.$9=function(){this.$13=[null,null,null],this.$14=[{},{},{}]};c.$8=function(){var a=this.$5,b=a.autoplayReason,c=a.autoplayReasonReadable,d=a.fblsHost,e=a.fblsTier,f=a.isShadow,g=a.isActiveActiveStream,h=a.shadowExperimentName;a=a.inputStreamId;return{autoplayReason:b,autoplayReasonReadable:c,lastMpdFetchDuration:null,prevMpdChangesTime:null,lastMpdChangesTime:Date.now(),mpdUpdatePollCount:0,segmentStates:{},segmentInitSourceMap:null,timelineEvents:[],timelineRanges:[],getSourceBufferHealth:this.getSourceBufferHealth,getLogEventsUntil:function(){return[]},yaw:0,pitch:0,lastRTT:null,fblsHost:d,fblsTier:e,isShadow:f,isActiveActiveStream:g,shadowExperimentName:h,inputStreamId:a,cvcV3Count:"-",p2pStats:null,p2pTech:null}};c.disable=function(){this.setHidden(!0),this.$15.release(),this.$16.unregisterOption("DebugOverlay","hidden")};c.enable=function(a){__p&&__p();var c=this,d;this.$16=a;this.$3=[];this.$15=new(b("SubscriptionsHandler"))();(d=this.$15).addSubscriptions.apply(d,[a.addListener("showDebugOverlay",this.$12),a.addListener("VideoWithLiveBroadcast/poll",this.onLivePoll),a.addListener("unifiedCVC/update",this.onUnifiedCVCUpdate),a.addListener("debug/dashPlayerEvent",this.onDashPlayerDebug),a.addListener("debug/vpcLogEvent",this.onVpcLogEvent),a.addListener("streamInterrupted",function(){c.$17("interrupted")}),a.addListener("streamResumed",function(){c.$17(null)}),a.addListener("buffering",function(){c.$17("buffering")}),a.addListener("buffered",function(){c.$17(null)}),a.addListener("abortedLoading",function(){c.$17("aborted")}),a.addListener("restoringAfterAbort",function(){c.$17("restoring"),c.$7=c.$8(),c.$9()}),a.addListener("restoredAfterAbort",function(){c.$17(null)}),a.addListener("bufferingChanged",function(){var b=a.getDebugInfo();b=b.player;b={stallTime:b.stallTime};var d={playbackPosition:a.getCurrentTimePosition()};c.$6.record(b,d,"bufferingChanged")}),a.addListener("viewportChange",function(a,b){c.$7.yaw=a,c.$7.pitch=b})].concat(this.registerKeys({d:this.toggleHidden,e:this.onExpose,f:this.onFreeze,m:this.toggleMute,p:this.togglePause,LEFT:this.onHistoryRew,RIGHT:this.onHistoryFwd})));a.registerOption("DebugOverlay","hidden",this.getHidden,this.setHidden);this.$18(a.getVideoID())&&this.setHidden(!1)};c.registerKeys=function(a){var c=[],d={baseFilters:[this.inFocusAndAltKey],allowDefault:!0};for(var e in a)c.push(b("KeyboardShortcuts").register(e,a[e],d));return c};c.$18=function(a){var c=(h||(h=b("URI"))).getRequestURI().getQueryData();c=c.vid;switch(c){case void 0:return!1;case null:return!0;default:return c.split(/\D+/g).indexOf(a)!==-1}};c.$17=function(a){this.$19=a};c.$20=function(){var a=this.$16.getState();this.$19&&(a+=" ("+this.$19+")");return a};c.addTimelineMark=function(a,b){a={type:a,time:b};this.removeTimelineMark(a);var c=this.$7.timelineEvents;c.push(a);return b};c.removeTimelineMark=function(a,b){var c=this.$7.timelineEvents;for(var d=0;d<c.length;d++){var e=c[d];if(e.type===a&&e.time===b){c.splice(d,1);return!0}}return!1};c.record=function(a,b,c){var d=this.$16;c=c||{};b=b||{};this.$6.record(b,Object.assign(c,this.$7,{playerState:this.$20(),playbackPosition:d.getCurrentTimePosition(),getSourceBufferHealth:this.getSourceBufferHealth}),a)};a.getSegmentId=function(a,b){return b+(a.unscaledStartTime||a.startTime)};a.getSegmentClass=function(b,c,d){c=a.getSegmentId(c,d);return n[b[c]||0]};c.onSegmentEvent=function(b,c){__p&&__p();var d=c.type,e=c.sourceBuffer;c=c.segment;c=this.$22(c);var f=c;f=f.url;c=a.getSegmentId(c,d);var g=m.indexOf(b);this.$7.segmentStates[c]=g;b==="SegmentFetched"&&f.getResourceTimingEntry()&&(this.$7.lastRTT=f.getResourceTimingEntry().timeToFirstByte);switch(d){case"v":this.$13[j]=e;break;case"a":this.$13[l]=e;break}return{segmentStates:[c,g]}};c.onP2PStats=function(a){this.$7.p2pStats=a};c.onP2PTech=function(a){this.$7.p2pTech=a};c.onSegmentIndexes=function(a,c){__p&&__p();var d=this;if(b("VideoPlayerShakaGlobalConfig").getBool("ignore_segment_index_updates_when_debug_overlay_hidden",!1)&&this.$16.isLiveVideo()&&this.$24)return null;c=c||a.some(function(a){return a.lastPollHadChanges&&a.lastPollHadChanges()});a=a.map(function(a){a=a.getSegments?a.getSegments():d.$25(a);return a.map(function(a){return d.$22(a)})});if(c){c=this.$7.lastMpdChangesTime;this.$7.prevMpdChangesTime=c;this.$7.lastMpdChangesTime=Date.now();this.$7.mpdUpdatePollCount=0}else this.$7.mpdUpdatePollCount+=1;this.$7.segmentArrays=a;c=a.map(function(a){return a[a.length-1]}).filter(function(a){return a}).map(function(a){a=a.endTime;return a});c.length&&(this.$7.liveheadPosition=Math.min.apply(Math,c));c=this.$7.mpdUpdatePollCount;return{segmentArrays:a,mpdUpdatePollCount:c}};c.$25=function(a){var b=[],c=0,d=a.getSegment(c);while(d)b.push(d),++c,d=a.getSegment(c);return b};c.onSegmentInitSources=function(a){this.$7.segmentInitSourceMap=new Map(a.map(function(a){var c=a.getFailoverUri();c=new(h||(h=b("URI")))(c.toString());return[c.getPath(),a]}))};c.isHidden=function(){return this.$24};c.startAnimating=function(){var a=this;if(this.$10)return;var c=function c(){a.renderOverlay(),a.$1?a.$10=b("setTimeout")(c,a.$1):a.$10=b("requestAnimationFrame")(c)};c()};c.stopAnimating=function(){var a=this.$10;this.$10&&(this.$1?b("clearTimeout")(this.$10):b("cancelAnimationFrame")(this.$10),this.$10=null);return a};c.prev=function(){this.freeze(),this.$6.prev()};c.next=function(){this.freeze();var a=this.$6.next();isFinite(a)||this.resume()};c["goto"]=function(a){this.freeze(),this.$6["goto"](a)};c.freeze=function(){this.$11||(this.$6.freezeProps(),this.$11=!0)};c.resume=function(){this.$11=!1};c.getPropsToRender=function(){return this.$11?this.$6.getProps():this.getProps()};c.getActiveMosValue=function(a,b,c){var d=this.$3.find(function(b){return b.streamInfoID===a});return d&&d.playbackResolutionMos?i(d.playbackResolutionMos,b,c):null};c.renderOverlay=function(){var a=!this.$24&&this.getPropsToRender();a&&b("ReactDOM").render(b("React").jsx(b("VideoDebugOverlay.react"),babelHelpers["extends"]({ref:this.$26},a)),this.$4)};c.$22=function(a){if(a.getTimeRange){var b=a.getTimeRange();return{startTime:b.startTime,endTime:b.endTime,url:a.getURI(),debugInfo:null}}return a};return a}();e.exports=a}),null);
__d("VideoComponentDebugOverlay.react",["cx","React","ReactDOM","VideoComponent","VideoDebugOverlay","VideoPlayerShakaGlobalConfig"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.enable=function(a){this.debugOverlay=new(b("VideoDebugOverlay"))(b("ReactDOM").findDOMNode(this.refs.videoDebugOverlay),{autoplayReason:this.props.autoplayReason,autoplayReasonReadable:"?"},{hidden:!0}),this.debugOverlay.enable(a)};d.disable=function(){this.debugOverlay.setHidden(!0),this.debugOverlay.disable()};d.render=function(){return b("React").jsx("div",{ref:"videoDebugOverlay",className:"_5m64 _1jto _3htz hidden_elem"})};return c}(b("React").Component);e.exports=b("VideoComponent").createContainer(a,{suppressMount:function(){return!b("VideoPlayerShakaGlobalConfig").getBool("enable_video_debug",!1)}})}),null);
__d("XPagesComposerDialogController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/pages/composer/dialog/",{entry_point:{type:"String",required:!0},open_composer:{type:"Enum",enumType:1},preview_url:{type:"String"},extra_info:{type:"StringToStringMap"},composer_prefill:{type:"String"},composer_igphoto_id:{type:"String"},attach_support_now_cta:{type:"Bool",defaultValue:!1},archived_story_card_id:{type:"FBID"},__asyncDialog:{type:"Int"}})}),null);